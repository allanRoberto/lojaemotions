jQuery(document).ready(function(e){"use strict";var a=e(".yith-s"),t="undefined"!=typeof woocommerce_params&&"undefined"!=typeof woocommerce_params.ajax_loader_url?woocommerce_params.ajax_loader_url:yith_wcas_params.loading,n=""==a.data("loader-icon")?t:a.data("loader-icon"),o=e("#yith-searchsubmit"),r=a.data("min-chars");o.on("click",function(){var a=e(this).closest("form");return""==a.find(".yith-s").val()?!1:!0}),a.each(function(){var a=e(this),t=a.closest("form"),o=!1,i=t.find(".search_categories"),s=t.find(".yit_wcas_post_type"),c=t.find('[name="lang"]').length>0?t.find('[name="lang"]').val():"",d="undefined"==typeof a.data("append-to")?a.closest(".yith-ajaxsearchform-container"):a.closest(a.data("append-to"));a.yithautocomplete({minChars:r,maxHeight:"auto",appendTo:d,triggerSelectOnValidInput:!1,serviceUrl:yith_wcas_params.ajax_url+"&post_type="+s.val()+"&lang="+c,onSearchStart:function(){a.css({"background-image":"url("+n+")","background-repeat":"no-repeat","background-position":"center right"})},onSearchComplete:function(){a.css("background-image","none"),e(window).trigger("resize"),a.trigger("focus")},onSelect:function(e){-1!=e.id&&(window.location.href=e.url)},beforeRender:function(){if("true"==yith_wcas_params.show_all&&o){var n={s:a.val(),post_type:t.find(".yit_wcas_post_type").val()};t.find(".search_categories").length>0&&(n.product_cat=t.find(".search_categories").val());var r=t.attr("action"),i=-1!==r.indexOf("?")?"&":"?",s=r+i+e.param(n),c='<div class="link-result"><a href="'+s+'">'+yith_wcas_params.show_all_text+"</a></div>",l=d.find(".autocomplete-suggestions");l.append(c)}},transformResult:function(a){return a="string"==typeof a?e.parseJSON(a):a,o=a.results,a},formatResult:function(a,t){var n="("+e.YithAutocomplete.utils.escapeRegExChars(t)+")",o="";return"undefined"!=typeof a.img&&(o+=a.img),o+='<div class="yith_wcas_result_content"><div class="title">',o+=a.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>"),o+="</div>","undefined"!=typeof a.product_categories&&(o+=" "+a.product_categories),"undefined"!=typeof a.div_badge_open&&(o+=a.div_badge_open),"undefined"!=typeof a.on_sale&&(o+=a.on_sale),"undefined"!=typeof a.outofstock&&(o+=a.outofstock),"undefined"!=typeof a.featured&&(o+=a.featured),"undefined"!=typeof a.div_badge_close&&(o+=a.div_badge_close),"undefined"!=typeof a.price&&""!=a.price&&(o+=" "+yith_wcas_params.price_label+" "+a.price),"undefined"!=typeof a.excerpt&&(o+=" "+a.excerpt.replace(new RegExp(n,"gi"),"<strong>$1</strong>")),o+="</div>"}}),i.length&&i.on("change",function(e){var t=a.yithautocomplete();""!=i.val()?t.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&product_cat="+i.val()+"&lang="+c}):t.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&lang="+c}),t.hide(),t.onValueChange()}),s.length&&("any"==s.val()?i.attr("disabled","disabled"):i.removeAttr("disabled"),s.on("change",function(e){var t=a.yithautocomplete();"any"==s.val()?i.attr("disabled","disabled"):i.removeAttr("disabled"),""!=s.val()?t.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&post_type="+s.val()+"&lang="+c}):t.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&lang="+c}),t.hide(),t.onValueChange()}))})});